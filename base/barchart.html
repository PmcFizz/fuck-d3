<!DOCTYPE html>
<html>

<head>
  <title>学习Data Join</title>
</head>

<body>
  <svg id="main" width="800" height="800"></svg>


  <script src="https://cdn.jsdelivr.net/npm/d3@7.0.1/dist/d3.min.js"></script>
  <script>
    const data = [
      { name: 'a', value: 1 },
      { name: 'b', value: 2 },
      { name: 'c', value: 3 },
      { name: 'd', value: 4 },
      { name: 'e', value: 5 },
    ]
    const svg = d3.select("#main")
    const width = svg.attr('width')
    const height = svg.attr('height')
    const margin = { top: 60, right: 30, bottom: 60, left: 200 }
    const innerHeight = height - margin.top - margin.bottom
    const innerWidth = width - margin.left - margin.right

    const g = svg.append('g').attr('id', 'maingroup')
      .attr('transform', `translate(${margin.left}, ${margin.top})`)

    const xScale = d3.scaleBand().domain(data.map(x => x.name))
      .range([0, innerWidth])
      .padding(0.5)

    const yScale = d3.scaleLinear()
      .domain([0, d3.max(data, x => x.value)])
      .range([innerHeight, 0])

    g.selectAll('.dataRect').data(data).enter()
      .append('rect')
      .attr('class', 'dataRect')
      // .transition().duration(1000)
      .attr('width', xScale.bandwidth())
      .attr('height', x => yScale(0) - yScale(x.value))
      .attr('x', d => xScale(d.name))
      .attr("y", d => yScale(d.value))
      .attr('fill', '#5470c6').attr('opacity', 0.8)


    const yAxis = d3.axisLeft(yScale)
    const xAxis = d3.axisBottom(xScale)

    g.append('g').call(yAxis)
    g.append('g').call(xAxis).attr('transform', `translate(0, ${innerHeight})`)

    d3.selectAll('.tick text').attr('font-size', '2em')
    g.append('text').text('Study Fuck d3').attr('font-size', '3em')
      .attr('x', innerWidth / 2 - 200).attr('y', -10)



  </script>
</body>

</html>